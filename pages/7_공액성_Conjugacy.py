import streamlit as st
import numpy as np

st.title("Conjugacy (공액성) - 베이즈 통계의 핵심 개념 🎯")

st.markdown("""
## 1. 핵심 개념 한눈에 보기

### Conjugacy(공액성)란?
베이즈 정리에서 어떤 분포를 사전확률로 선택했을 때, 데이터를 관측한 후에도 **같은 분포 형태로 남는** 성질을 의미합니다.

### 왜 중요한가?
* 계산이 매우 간단해짐 (파라미터만 업데이트)
* 베이지안 추론을 실용적으로 만들어주는 핵심 개념
* 직관적인 해석이 가능

## 2. 수식으로 이해하기

### 베이즈 정리의 기본 공식
$$p(x|y) = \\frac{p(y|x)p(x)}{p(y)}$$

여기서:
* $p(x)$: 사전확률(prior)
* $p(y|x)$: 우도(likelihood)
* $p(x|y)$: 사후확률(posterior)
* $p(y)$: 정규화 상수

### 공액 관계의 주요 예시들

1. **베타-베르누이 공액**
   * 우도: 베르누이 분포
   * 사전: 베타 분포
   * 사후: 베타 분포
   * 파라미터 업데이트: $Beta(α+성공횟수, β+실패횟수)$

2. **감마-포아송 공액**
   * 우도: 포아송 분포
   * 사전: 감마 분포
   * 사후: 감마 분포
   * 파라미터 업데이트: $Gamma(α+∑x_i, β+n)$

## 3. 시험 답안 작성법 📝

### 모범 답안 예시
```
Conjugacy(공액성)란, 베이즈 정리에서 어떤 분포를 사전확률로 사용하면, 
관측된 데이터로 사후확률을 구했을 때에도 같은 분포군(분포 패밀리)에 
속하는 형태가 되는 성질을 의미한다.

이는 베이즈 정리 p(x|y) = p(y|x)p(x)/p(y)에서,
사전확률의 파라미터만 업데이트하면 사후확률을 쉽게 계산할 수 있다는 것을 의미한다.

예를 들어, 베르누이 분포의 우도와 베타 분포의 사전확률을 곱하면, 
사후확률도 베타 분포가 된다.
```

### 답안 작성 필수 포함 요소
1. **개념 설명**
   * "같은 분포 형태로 남는다"는 표현 필수
   * 베이즈 정리와 연관지어 설명

2. **수식 표현**
   * 베이즈 정리 공식 작성
   * 각 요소(사전, 우도, 사후) 설명

3. **구체적 예시**
   * 최소 1개의 공액 쌍 예시
   * 파라미터 업데이트 방법

## 4. 주요 공액 관계 정리 📊

| 우도 분포 | 공액 사전분포 | 파라미터 업데이트 |
|---------|------------|----------------|
| 베르누이 | 베타 | $α_{new} = α + s$ <br> $β_{new} = β + f$ |
| 포아송 | 감마 | $α_{new} = α + ∑x$ <br> $β_{new} = β + n$ |
| 정규분포 | 정규-감마 | (복잡하여 생략) |

## 5. 시험 대비 체크리스트 ✅

1. 기본 개념
   - [ ] "같은 분포 형태" 개념 이해
   - [ ] 베이즈 정리와의 관계 파악
   - [ ] 파라미터 업데이트 의미 이해

2. 수식 및 예시
   - [ ] 베이즈 정리 공식 암기
   - [ ] 주요 공액 쌍 2개 이상 암기
   - [ ] 파라미터 업데이트 방법 이해

3. 응용
   - [ ] 실제 문제에 적용 가능
   - [ ] 파라미터 계산 가능
   - [ ] 장단점 설명 가능

## 6. 자주 나오는 시험 문제 유형 📝

1. 개념 설명형
   * "Conjugacy(공액성)의 의미를 설명하시오"
   * "공액 사전분포의 장점을 설명하시오"

2. 계산형
   * "베타-베르누이 공액에서 파라미터를 구하시오"
   * "주어진 데이터로 사후분포를 구하시오"

3. 응용형
   * "실제 문제에서 적절한 공액 사전분포를 선택하시오"
   * "공액성의 장단점을 논하시오"
""")

# 사이드바에 학습 가이드 추가
st.sidebar.markdown("""
## 📚 학습 순서 가이드

1. 개념 이해하기
   * 공액성의 의미
   * 베이즈 정리와의 관계
   * 실용적 의미

2. 수식 익히기
   * 베이즈 정리
   * 주요 공액 쌍
   * 파라미터 업데이트

3. 예제 풀이
   * 개념 적용
   * 계산 연습
   * 실제 문제 해결

## 🎯 시험 직전 체크리스트

- [ ] 공액성 정의 완벽 암기
- [ ] 베이즈 정리 공식 암기
- [ ] 주요 공액 쌍 2개 이상 암기
- [ ] 파라미터 업데이트 방법 이해
- [ ] 모범 답안 작성 연습
""") 